<?php defined('SYSPATH') or die('No direct script access.');  class Controller_Bulkdelete extends Controller_Layout {  	public function before(){		 parent::before();	     $this->template->set_filename('layout/admin');	}  	public function __construct(Request $request)	{                        // Check Login or not               if (Auth::instance()->logged_in('',$all_required=false) == 0) {                             Request::current()->redirect('/auth/signin');                }            		// Assign the request to the controller    		parent::__construct($request);	}		public function action_delete()	{            $objCallcenter = ORM::factory('callcenter');            $callcenter_data = $objCallcenter->find_all()->as_array();			$objClient = ORM::factory('user');            $client_data = $objClient->find_all()->as_array();            $search_campaign = $_POST['search_campaign'];            $search_callcenter = $_POST['search_callcenter'];			if(isset($_POST['search_startdate']))				$search_startdate = date('Y-m-d',strtotime($_POST['search_startdate']));			$search_enddate = date('Y-m-d',strtotime($_POST['search_enddate']));             if($search_enddate=='')                $search_enddate = date('Y-m-d');             else                 $search_enddate = date('Y-m-d',strtotime($_POST['search_enddate']));				             $search_leadtype = $_POST['search_lead_type'];			           if($search_startdate!='')           {				              $total_rows = DB::delete('tbl_leads')->where('sold_date','>=',$search_startdate)->where('sold_date','<=',$search_enddate)->where('lead_type','=',$search_campaign)->where('lead_campaign','=',$search_leadtype)->where('user_id','=',$_POST['search_client'])->execute();                         }                       		$this->template->title = "Dashboard";		$this->template->content = View::factory('bulkdelete/deleteall')  			->set('total_rows', $total_rows)                        ->set('callcenter_data',  $callcenter_data)						->set('client_data',  $client_data)                        ->set('paydayleadsData_reminder', $paydayleadsData_reminder)                        ->set('newest_members_lists', $newest_members_lists);                                       	}		       } // End Dashboard